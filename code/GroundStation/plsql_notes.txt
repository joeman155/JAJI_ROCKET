Summary
---------
These are steps to set-up pgsql equivalent database env of SQLLITE DB.
We are doing this because of locking issues that cause delays in sQLITE3.
Eventually, we hope that this will replace sqlite3 and these notes will be 
merged with main instructions



Steps
--------

As UNIX user root:-
apt-get install libdbd-pg-perl
apt-get install php5-pgsql


As the UNIX user postgres

pgsql 

create database rls

quit;


pgsql -d rls

create user joeman with password 'joeman';

grant all privileges on rls to joeman;

create user "www-data";

grant select on * to www-data;

quit;

CREATE sequence imu_id_seq;

CREATE TABLE imu_t (id integer primary key default nextval('imu_id_seq'),
                    instance_id varchar(100),
                    roll   float,
                    pitch  float,
                    yaw    float,
                    gyrox     float,
                    gyroy     float,
                    gyroz     float,
                    accx      float,
                    accy      float,
                    accz      float,
                    timer     integer,
                    creation_date date);

ALTER TABLE imu_t ALTER COLUMN creation_date SET DEFAULT CURRENT_DATE;

grant select on imu_t to "www-data";

CREATE sequence measurement_group_id_seq;

CREATE TABLE measurement_group_t (
    id integer primary key default nextval('measurement_group_id_seq'),
    group_name varchar(5),
    source varchar(10),
    creation_date date);

ALTER TABLE measurement_group_t ALTER COLUMN creation_date SET DEFAULT CURRENT_DATE;

grant select on measurement_group_t to "www-data";

CREATE sequence measurement_id_seq;

CREATE TABLE measurement_t (id integer primary key default nextval('measurement_id_seq'),
    instance_id varchar(100),
    group_id integer,
    name   varchar(20),
    value float);

grant select on measurement_t to "www-data";



CREATE sequence message_id_seq;

CREATE TABLE messages_t (id integer primary key default nextval('message_id_seq'),
                         instance_id varchar(100),
                         message varchar(256),
                         creation_date date);

ALTER TABLE messages_t ALTER COLUMN creation_date SET DEFAULT CURRENT_DATE;

grant select on measurement_t to "www-data";

